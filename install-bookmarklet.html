<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Install Week Selector Bookmarklet</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #333;
        }
        .bookmarklet {
            display: inline-block;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
        }
        .instructions {
            background-color: #f4f4f4;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Install Week Selector Bookmarklet</h1>
    <p>Drag the button below to your bookmarks bar to install the Week Selector bookmarklet:</p>
    
    <a class="bookmarklet" href="javascript:(function() { if (window._weekSelectorInjected) { console.log('Week selector already injected. Skipping.'); return; } window._weekSelectorInjected = true; function loadScript(src) { return new Promise((resolve, reject) => { const script = document.createElement('script'); script.src = src; script.onload = resolve; script.onerror = reject; document.head.appendChild(script); }); } function injectWeekSelector() { console.log('Injecting week selectors...'); const dateInputs = document.querySelectorAll('input[type=&quot;date&quot;]'); dateInputs.forEach((dateInput, index) => { console.log(`Processing date input ${index + 1}/${dateInputs.length}`); if (!dateInput.nextElementSibling || !dateInput.nextElementSibling.matches('week-selector')) { const weekSelector = document.createElement('week-selector'); weekSelector.setAttribute('selected-date', dateInput.value || new Date().toISOString().split('T')[0]); dateInput.parentNode.insertBefore(weekSelector, dateInput.nextSibling); weekSelector.addEventListener('week-changed', (event) => { console.log('Week changed event received'); dateInput.value = event.detail.toISOString().split('T')[0]; dateInput.dispatchEvent(new Event('change', { bubbles: true })); }); dateInput.addEventListener('change', () => { console.log('Date input changed'); weekSelector.setAttribute('selected-date', dateInput.value); }); } }); console.log('Week selector injection complete'); } loadScript('https://unpkg.com/week-selector@1.0.3/week-selector.js') .then(() => { console.log('Week selector script loaded successfully'); injectWeekSelector(); }) .catch(error => console.error('Failed to load week-selector.js', error)); })();">
        Add Week Selector
    </a>

    <div class="instructions">
        <h2>Installation Instructions:</h2>
        <ol>
            <li>Make sure your bookmarks bar is visible in your browser.</li>
            <li>Click and drag the "Add Week Selector" button above to your bookmarks bar.</li>
            <li>Release to drop it on your bookmarks bar.</li>
        </ol>
        <h2>Usage Instructions:</h2>
        <ol>
            <li>Navigate to any webpage with date input fields.</li>
            <li>Click the "Add Week Selector" bookmark in your bookmarks bar.</li>
            <li>Week selectors should appear next to all date input fields on the page.</li>
        </ol>
        <p><strong>Note:</strong> Some websites may have security policies that prevent the bookmarklet from working. If you encounter issues, try it on a different website.</p>
        <a href="./test-bookmarklet.html">test-bookmarklet</a>
        <a href="./install-bookmarklet.html">install-bookmarklet</a>
        <a href="./index.html">test-component</a>
    </div>
</body>
</html>
